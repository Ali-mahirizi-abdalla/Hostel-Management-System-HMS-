{% extends 'hms/base.html' %}

{% block title %}Update Meal Preferences - {{ block.super }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Update Meal Preferences</h2>
    
    <div class="row">
        <div class="col-md-8">
            <div class="card mb-4">
                <div class="card-header">
                    <h5>Today's Meals ({{ today|date:"F j, Y" }})</h5>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                {{ form.breakfast }}
                                <label class="form-check-label" for="{{ form.breakfast.id_for_label }}">
                                    {{ form.breakfast.label }}
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                {{ form.early_breakfast }}
                                <label class="form-check-label" for="{{ form.early_breakfast.id_for_label }}">
                                    {{ form.early_breakfast.label }}
                                    <small class="text-muted">(Available 6:00 AM - 7:00 AM)</small>
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                {{ form.lunch }}
                                <label class="form-check-label" for="{{ form.lunch.id_for_label }}">
                                    {{ form.lunch.label }}
                                </label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                {{ form.dinner }}
                                <label class="form-check-label" for="{{ form.dinner.id_for_label }}">
                                    {{ form.dinner.label }}
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card mb-4">
                <div class="card-header">
                    <h5>Upcoming Meals</h5>
                </div>
                <div class="card-body">
                    {% if upcoming_meals %}
                        <div class="list-group">
                            {% for meal in upcoming_meals %}
                                <div class="list-group-item">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">{{ meal.date|date:"D, M j" }}</h6>
                                        <small class="text-muted">
                                            {% if meal.breakfast %}<i class="fas fa-utensils text-success"></i>{% endif %}
                                            {% if meal.lunch %}<i class="fas fa-utensils text-success ms-1"></i>{% endif %}
                                            {% if meal.dinner %}<i class="fas fa-utensils text-success ms-1"></i>{% endif %}
                                        </small>
                                    </div>
                                    <small class="text-muted">
                                        {% if meal.early_breakfast %}Early Breakfast â€¢ {% endif %}
                                        {{ meal.breakfast|yesno:"Breakfast," }}{{ meal.lunch|yesno:", Lunch," }}{{ meal.dinner|yesno:", Dinner" }}
                                    </small>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <p class="text-muted">No upcoming meal preferences set.</p>
                    {% endif %}
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h5>Meal Schedule</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li><strong>Early Breakfast:</strong> 6:00 AM - 7:00 AM</li>
                        <li><strong>Breakfast:</strong> 7:30 AM - 9:30 AM</li>
                        <li><strong>Lunch:</strong> 12:30 PM - 2:30 PM</li>
                        <li><strong>Dinner:</strong> 7:30 PM - 9:30 PM</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
